<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统计监控</title>
    <link rel="stylesheet" href="./css/normalize.css" />
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/echarts.min .js"></script>
    <script>
        $(function(){
            $(".switch div").click(function(){
                var _this = $(this);
                $(".switch div").removeClass('active');
                _this.addClass('active');
            });
            $(".dropdown1 a").click(function(){
                var _this = $(this);
                $(".dropdown1 .icon").removeClass('glyphicon-check');
                $(".dropdown1 .icon").addClass('glyphicon-unchecked');
                _this.prev().removeClass('glyphicon-unchecked');
                _this.prev().addClass('glyphicon-check');
            });
            $(".dropdown2 a").click(function(){
                var _this = $(this);
                $(".dropdown2 .icon").removeClass('glyphicon-check');
                $(".dropdown2 .icon").addClass('glyphicon-unchecked');
                _this.prev().removeClass('glyphicon-unchecked');
                _this.prev().addClass('glyphicon-check');
            });
            $(".case-analysis .case-bread div").click(function(){
                var _this = $(this);
                $(".case-analysis .case-bread div").removeClass('active');
                _this.addClass('active');
            });
            $(".case-ranking .case-bread div").click(function(){
                var _this = $(this);
                $(".case-ranking .case-bread div").removeClass('active');
                _this.addClass('active');
            });
            $(".dropdown-menu a").click(function(){
                var _this = $(this);
                var sp = _this.parent().parent().parent().find('button').find('span:first');
                sp.text(_this.text())
            });
            // 基于准备好的dom，初始化echarts实例 
            //实例分析chart初始化
            var curInt = null;
            var myChart = echarts.init(document.getElementsByClassName('case-chart')[0]);
            var option = {
                title: {},
                tooltip: {},
                toolbox: {
                    show: true,
                    feature: {
                        saveAsImage: {}//截图并下载
                    }
                },
                legend: {
                    data:[]
                },
                xAxis: {
                    type:'category',
                    axisTick:{//刻度线属性
                        show: false
                    },
                    boundaryGap: ['0%', '0%'],
                    data: ["2019-01","2019-02","2019-03","2019-04","2019-05","2019-06","2019-07","2019-08","2019-09","2019-10","2019-11","2019-12"]
                },
                yAxis: {
                    axisLine:{//y轴属性
                        show: false
                    },
                    axisTick:{//y轴刻度线属性
                        show: false
                    },
                    splitLine:{//y轴分隔线属性
                        show: true,
                        lineStyle:{
                            type: 'dashed'
                        }
                    }
                },
                series: [{
                    name: '服务申请次数',
                    type: 'bar',//种类——柱形
                    barWidth: 40,//柱子宽度
                    itemStyle: {
                        color: function(params){
                            var key = params.dataIndex;
                            if(key===curInt){
                                return '#00cc99'//点击后的颜色
                            }else{
                                return '#3ba1ff'//不点击的颜色
                            }
					    }
                    },
                    z:1,//类似z-index
                    data: [2000, 800, 200, 2100, 1800, 1900, 2400, 198, 202, 1950, 2450, 1000],
                    markLine:{
                        lineStyle:{
                            color: '#2fc25b'
                        },
                        precision : 0,
                        data:[{
                            type : 'average', 
                            name: '平均值',
                            symbol: 'none'
                        }]
                    }
                },{
                    name: '次数',
                    type: 'line',//种类——折线
                    itemStyle: {//style设置
                        color: '#1a92ea' 
                    },
                    z:2,//类似z-index
                    data: [2000, 800, 200, 2100, 1800, 1900, 2400, 198, 202, 1950, 2450, 1000],
                    label:{//数值文字显示
                        show:true,//是否显示
                        color: '#666',
                        formatter: '{c}次',//数值的展示形式
                        offset: [0,-10]//与原位置偏离度
                    }
                }]
            };
            myChart.setOption(option);
            myChart.on('click', function (params) {//点击更换柱形颜色事件
                //myChart.clear();
                curInt = params.dataIndex;
                myChart.setOption(option,false);
            });
        });
    </script>
    <script>
        $(function(){
            //实例排名chart初始化
            var myChart = echarts.init(document.getElementsByClassName('ranking-chart')[0]);
            var option = {
                title: {},
                tooltip: {},
                toolbox: {
                    show: true,
                    feature: {
                        saveAsImage: {}//截图并下载
                    }
                },
                legend: {
                    data:[]
                },
                xAxis: {
                    type:'category',
                    axisTick:{//刻度线属性
                        show: false
                    },
                    boundaryGap: ['0%', '0%'],
                    data: ["服务1","服务2","服务3","服务4","服务5","服务6","服务7","服务8","服务9","服务10"]
                },
                yAxis: {
                    axisLine:{//y轴属性
                        show: false
                    },
                    axisTick:{//y轴刻度线属性
                        show: false
                    },
                    splitLine:{//y轴分隔线属性
                        show: true,
                        lineStyle:{
                            type: 'dashed'
                        }
                    }
                },
                series: [{
                    name: '服务申请次数',
                    type: 'bar',//种类——柱形
                    barWidth: 40,//柱子宽度
                    itemStyle: {
                        color: function(params){
                            var key = params.dataIndex;
                            if(key <= '2'){
                                return '#ff0000cc'//点击后的颜色
                            }else{
                                return '#00cccca5'//不点击的颜色
                            }
					    }
                    },
                    z:1,//类似z-index
                    data: [750, 650, 550, 450, 350, 251, 150, 150, 160, 170],
                    label:{//数值文字显示
                        show:true,//是否显示
                        position: 'top',
                        color: '#666',
                        formatter: '{c}次',//数值的展示形式
                        offset: [0,-10]//与原位置偏离度
                    }
                }]
            };
            myChart.setOption(option);
        });
    </script>
</head>
<body>
    <div class="main">
        <div class="main-title">
            <p>统计监控</p>
        </div>
        <div class="header-bar">
            <div class="switch">
                <div class="active">统计总览</div>
                <div>实例分析</div>
                <div>排名分析</div>
                <div>参与人分析</div>
            </div>
            <div class="source-time">
                <div class="source">
                    <p>来源:</p>
                    <div class="dropdown dropdown1">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span>全部</span>
                            <span class="caret"></span全部>
                        </button>
                        <ul class="dropdown-menu" style="min-width:100%;" aria-labelledby="dropdownMenu1">
                            <li><span class="icon glyphicon-check" aria-hidden="true"></span><a href="#">人事处</a></li>
                            <li><span class="icon glyphicon-unchecked" aria-hidden="true"></span><a href="#">财务处</a></li>
                            <li><span class="icon glyphicon-unchecked" aria-hidden="true"></span><a href="#">学工处</a></li>
                            <li><span class="icon glyphicon-unchecked" aria-hidden="true"></span><a href="#">教务处</a></li>
                        </ul>
                    </div>
                    <div class="dropdown dropdown2">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span>全部</span>
                            <span class="caret"></span全部>
                        </button>
                        <ul class="dropdown-menu" style="min-width:100%;" aria-labelledby="dropdownMenu2">
                            <li><span class="icon glyphicon-check" aria-hidden="true"></span><a href="#">本科生请假申请</a></li>
                            <li><span class="icon glyphicon-unchecked" aria-hidden="true"></span><a href="#">研究生请假申请</a></li>
                            <li><span class="icon glyphicon-unchecked" aria-hidden="true"></span><a href="#">教职工请假申请</a></li>
                            <li><span class="icon glyphicon-unchecked" aria-hidden="true"></span><a href="#">教职工出国申请</a></li>
                        </ul>
                    </div>
                </div>
                <div class="time">
                    <p>时间:</p>
                    <div class="input-date">
                        <input class="from-date" type="date"> ~ 
                        <input class="to-date" type="date">
                    </div>
                </div>
            </div>
        </div>
        <!-- 统计总览 -->
        <div class="tongji-all">
            <div class="all-header">
                <div class="all-header-content">
                    <div>统计总览</div>
                    <span>数据更新至 2020.07.29 10:13</span>
                </div>
            </div>
            <div class="all-data">
                <div class="data-item">
                    <p>申请次数</p>
                    <div class="data-info">
                        9,999<span>次</span>
                    </div>
                    <p class="data-foot">近一个月申请次数：30,000 次</p>
                </div>
                <div class="data-item">
                    <p>办理次数</p>
                    <div class="data-info">
                        99,999<span>次</span>
                    </div>
                    <p class="data-foot">近一个月办理次数：30,000 次</p>
                </div>
                <div class="data-item">
                    <p>服务数量</p>
                    <div class="data-info">
                        89<span>（使用）</span><span class="bar">|</span>99<span>（总数）个</span>
                    </div>
                    <p class="data-foot">近一个月新增服务：3个</p>
                </div>
                <div class="data-item">
                    <p>进行中的流程</p>
                    <div class="data-info">
                        1,000<span>个</span>
                    </div>
                    <p class="data-foot">近一个月进行中的流程：500 个</p>
                </div>
                <div class="data-item">
                    <p>服务平均响应时长</p>
                    <div class="data-info">
                        4D<span style="font-size:20px">3h 31m 59s</span>
                    </div>
                    <p class="data-foot">近一个月服务平均响应时长：4d 3h 31m 59s</p>
                </div>
                <div class="data-item">
                    <p>办结率</p>
                    <div class="data-info">
                        100<span>%</span>
                    </div>
                    <p class="data-foot">近一个月办结率：80 %</p>
                </div>
            </div>
        </div>
        <!-- 实例分析 -->
        <div class="case-analysis">
            <div class="case-header">
                <div class="case-header-content">
                    <div>实例分析</div>
                    <div class="case-bread">
                        <div class="active">服务申请次数</div>
                        <div>服务办理次数</div>
                        <div>服务申请人数</div>
                        <div>服务办理人数</div>
                    </div>
                    <div class="case-month">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span>月</span>
                                <span class="caret"></span全部>
                            </button>
                            <ul class="dropdown-menu" style="min-width:100%;" aria-labelledby="dropdownMenu1">
                                <li><a href="#">月</a></li>
                                <li><a href="#">日</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="case-chart"></div>
        </div>
        <!-- 实例排名 -->
        <div class="case-ranking">
            <div class="case-header">
                <div class="case-header-content">
                    <div>实例排名</div>
                    <div class="case-bread">
                        <div class="active">服务申请次数</div>
                        <div>服务办理次数</div>
                        <div>服务申请人数</div>
                        <div>服务办理人数</div>
                    </div>
                    <div class="ranking-pages">
                        <div class="btn-group btn-group-sm" role="group" aria-label="...">
                            <button type="button" class="btn btn-primary">前十名</button>
                            <button type="button" class="btn btn-primary">后十名</button>
                        </div>
                        <button type="button" class="btn btn-inverse" style="margin-left: 1rem;">查看更多</button>
                    </div>
                </div>
            </div>
            <div class="ranking-chart"></div>
        </div>
    </div>
</body>
</html>